<!DOCTYPE html>
<html lang="en-us">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="generator" content="Hugo 0.21" />
  <meta name="author" content="Carl Boettiger">
  

  
  
  
    
    
    <link rel="stylesheet" href="../../../../css/highlight.min.css">
    
  
  
  <link rel="stylesheet" href="../../../../css/bootstrap.min.css">
  <link rel="stylesheet" href="../../../../css/font-awesome.min.css">
  <link rel="stylesheet" href="../../../../css/academicons.min.css">
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lato:400,700|Merriweather|Roboto+Mono">
  
  
    <link rel="stylesheet" href="../../../../css/cboettig.css">
  
  
  <link rel="alternate" href="../../../../index.xml" type="application/rss+xml" title="Boettiger Group">
  <link rel="feed" href="../../../../index.xml" type="application/rss+xml" title="Boettiger Group">

  <link rel="icon" type="image/png" href="../../../../img/icon.png">
  <link rel="apple-touch-icon" type="image/png" href="../../../../img/apple-touch-icon.png">
  <link rel="canonical" href="../../../../2013/08/28/rnexml-coding/">


  <title> | Boettiger Group</title>

</head>
<body id="top" data-spy="scroll" data-target="#navbar-main" data-offset="71">


<nav class="navbar navbar-default navbar-fixed-top" id="navbar-main">
  <div class="container">

    
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
              data-target=".navbar-collapse" aria-expanded="false">
        <span class="sr-only"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../../../../">Boettiger Group</a>
    </div>

    
    <div class="collapse navbar-collapse">

      
      <ul class="nav navbar-nav navbar-right">
        

        

        <li class="nav-item">
          <a href="../../../../index.html">
            
            <span>Home</span>
          </a>
        </li>

        
        

        

        <li class="nav-item">
          <a href="../../../../members/">
            
            <span>Members</span>
          </a>
        </li>

        
        

        

        <li class="nav-item">
          <a href="../../../../vita/">
            
            <span>Publications</span>
          </a>
        </li>

        
        

        

        <li class="nav-item">
          <a href="../../../../teaching/">
            
            <span>Teaching</span>
          </a>
        </li>

        
        

        

        <li class="nav-item">
          <a href="../../../../lab-notebook">
            
            <span>Lab Notebook</span>
          </a>
        </li>

        
        
      </ul>

    </div>
  </div>
</nav>


<div class = "container">


<div class="row">
  <div class="col-md-7 col-md-offset-1">
    <article>
    
      
    <ul>
<li>test_ape.R unit tests now passing.
Should still revise the coercion methods in nexml_write.R to something more clever.  We aren&rsquo;t
coercing a tree to a nexml, we are building a nexml from a tree.  Likewise handling
the otu assignments of species names should be done directly <a href="https://github.com/ropensci/RNeXML/commit/8a182d4cc6fb75099067142327788be8d51eef6e">11:20 am 2013/08/28</a></li>
<li>start cleaning up old read/write methods obsoleted by toNeXML/fromNeXML methods <a href="https://github.com/ropensci/RNeXML/commit/ffb7342f1d28b351984685a83e11d7df488696e8">10:59 am 2013/08/28</a></li>
<li>inherited classes now replace all the original classes <a href="https://github.com/ropensci/RNeXML/commit/004d31fc2c87a4cf2dba45ab08f1b8a663ab5258">10:54 am 2013/08/28</a></li>
<li>All inheritance-based classes appearing in inst/examples/trees.xml now implemented <a href="https://github.com/ropensci/RNeXML/commit/d9e649ac64b697d4ea982a1bb78b403400984392">10:53 am 2013/08/28</a></li>

<li><p>added classes for otu, otus, tree, trees, nexml, edge, rootEdge <a href="https://github.com/ropensci/RNeXML/commit/b9543f64352759f4dbb1f77a170cced78280c9a7">12:04 am 2013/08/28</a></p></li>

<li><p>Working on #1 : What works and what doesn&rsquo;t:
The example in inst/tests/inheritance.R should run using the class
definitions in R/inherited_classes.R.  Other class definitions are
obsoleted by these updates and should eventually be removed.
The ape methods should be unaffected, since the S4 classes have the
same structure as before, only defined through inheritance instead.</p></li>
</ul>

<p>ToDo:
- Remove the obsoleted methods in classes.R, nexml_read.R and nexml_write.R
- Check the ape.R unit tests, update other unit tests
- Write remaining essential classes out by hand based on
inheritance and schema definitions: e.g. edge, otu, otus, tree, trees, nexml <a href="https://github.com/ropensci/RNeXML/commit/fd2e6b0f8f31823c4c65916a20fe339fb2038646">04:26 pm 2013/08/27</a>
- Begun replacing class definitions with inheritance-based classes
taking a brute-force approach in defining conversion methods.
Conversion methods between XML and S4 explicitly assign attributes
and values to S4 slots, rather than using the clever XML package
functions to guess what goes where (since that approach cannot
include a call to callNextMethod, which allows us to recursively
go down the inheritance classes. The up side of this approach is
that you don&rsquo;t have to think much to write methods, it&rsquo;s merely verbose.) <a href="https://github.com/ropensci/RNeXML/commit/8b45dee59848702c5aea6bf23ea06802b462d55d">04:11 pm 2013/08/27</a></p>

<ul>
<li>fixed ape tests, extended setAs(&lsquo;nexml&rsquo;, &lsquo;phylo&rsquo;)
to handle the case of multiple trees <a href="https://github.com/ropensci/RNeXML/commit/4fa252e20c7ee44a93573d3eb2c5dd3e781103c3">04:27 pm 2013/08/28</a></li>
<li>Now use otu labels as species names in both directions, closes #8
See updated tests in inst/test/test_ape.R.
Note that coercing phylo-&gt;tree is still permitted, since resulting S4 tree is valid (though really intended as internal),
but coercing tree-&gt;phylo is no longer available as a separate routine, since this is lossy as the tip.labels are not
stored in tree but in nexml@otu <a href="https://github.com/ropensci/RNeXML/commit/abf298614f587d7eb99c67a0acd15d731690df54">03:54 pm 2013/08/28</a></li>
<li>updated nexml-&gt;ape conversion to get tip.labels from otus
instead of just using the otu attribute on the node, which simply corresponds to the id of the otu element in otu.
the taxon (species name) is in the label of the matching element instead.  Still needs some testing and a unit test
to confirm the label is correct.  This addresses <sup>1</sup>&frasl;<sub>2</sub> of #8.</li>
</ul>

<p>Still need to handle the case of coercing ape-&gt;nexml, in which a method generates the otus node from the tip.label list
and matches the id to node&rsquo;s otu attribute.  This means that ape-&gt;tree doesn&rsquo;t look at tip.label, but just generates
locally unique keys for the node otu attribute <a href="https://github.com/ropensci/RNeXML/commit/b97df1abac843b33214109d95c5baaa740dbe83e">01:40 pm 2013/08/28</a></p>

    </article>
  </div>
  <div class="col-md-4">
    <div class="sidebar">
      <aside prefix="og:http://ogp.me/ns/article#">
  
  
  
<div class="article-metadata">

  <p>
  <span class="article-date">
    <i class="fa fa-calendar"></i>
    
    <time datetime="2013-08-28 00:00:00 &#43;0000 UTC" itemprop="datePublished">
      Wed, Aug 28, 2013
    </time>
    
  </span>
  </p>
    

  <p>
  
  
  
  <span class="article-categories">
    <i class="fa fa-folder"></i>
    
    <a href="../../../../categories/evolution">evolution</a
    >
    
  </span>
  
  
  </p>
  
  <p>
  
  
  
  <span class="article-tags">
    <i class="fa fa-tags"></i>
    
    <a href="../../../../tags/ropensci">ropensci</a
    >, 
    
    <a href="../../../../tags/rnexml">rnexml</a
    >
    
  </span>
  
  
  </p>

</div>

 
  <br />
  
  <p><a class="btn btn-default" rel="prev" href='../../../../2013/08/29/notes/'><i class="fa fa-chevron-left"></i> prev</a>
    <a class="btn btn-default" rel="next" href='../../../../2013/08/26/notes/'>next <i class="fa fa-chevron-right"></i></a></p>

  <br />

  <p> <a class="btn btn-default" 
         href="https://github.com/cboettig/cboettig.github.io/commits/master/content/lab-notebook/2013-08-28-rnexml-coding.md"><i class="fa fa-clock-o"></i> history</a></p>

  <p> <i class="fa fa-barcode"></i> SHA: <a href="https://github.com/cboettig/cboettig.github.io/blob/9d9072923c46d635718a4624d6afff6b1ec2439f/content/lab-notebook/2013-08-28-rnexml-coding.md">9d90729</a></p> 


</aside>

    </div>
  </div>
</div>


<section id="comments">
  <div id="disqus_thread">
    <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'cboettig';
    var disqus_identifier = '\/2013\/08\/28\/rnexml-coding\/';
    var disqus_title = '';
    var disqus_url = '\/2013\/08\/28\/rnexml-coding\/';

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
  </div>
</section>


</div>

<footer class="site-footer">
  <hr />
  <div class="container">

  <div class="row">
    <div class="col-md-3 col-xs-4 socialicons" style="font-size:20px" typeof="foaf:Person" about="https://carlboettiger.info/#me">
      <p>
      <script type="text/javascript" src="../../../../js/obfuscate-email-link.js"></script> 

          <a rel="foaf:account" href="https://twitter.com/cboettig" 
             onclick="recordOutboundLink(this, 'Outbound Links', 'Twitter'); 
             return false;"><span class="showtooltip" title="follow me on twitter (reading, discussing)"><i class="fa fa-twitter"></i></span></a> 

          <a rel="foaf:account" href="https://github.com/cboettig" 
             onclick="recordOutboundLink(this, 'Outbound Links', 'Github'); 
             return false;"><span class="showtooltip" title="follow me on Github (code, research)"><i class="fa fa-github"></i></span></a>
           <a rel="foaf:weblog" type="application/atom+xml" href="../../../../index.xml"  
        class="showtooltip" title="RSS feeds for my blog-style entries." 
         onclick="recordOutboundLink(this, 'Outbound Links', 'RSS'); 
         return false;"><i class="fa fa-rss"></i></a>
       </p>
    </div>

    
    


    <div class="col-md-4 col-md-offset-1 col-xs-4">
	    <p><a onclick="recordOutboundLink(this, 'Outbound Links', 'ONS_claim'); return false;" href="http://onsclaims.wikispaces.com/"><img src="../../../../img/ons-aci2-icon.svg" alt="ONS" class="showtooltip" title="An Open Notebook Science (ONS) project claim: Entry provides all content (AC) immediately (I) or without significant delay.  See link for details"/></a></p>
    </div>


    <div class="col-md-3 col-md-offset-1 col-xs-4">
      <p>
      <a rel="license" property="http://creativecommons.org/ns#license" href="http://creativecommons.org/publicdomain/zero/1.0/" onclick="recordOutboundLink(this, 'Outbound Links', 'CC0'); return false;"><img src="../../../../img/cc-zero.svg" alt="CC0"/></a> 
      </p>
    </div>
  </div>
</footer>


    <script src="//cdnjs.cloudflare.com/ajax/libs/gsap/1.18.4/TweenMax.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/gsap/latest/plugins/ScrollToPlugin.min.js"></script>
    <script src="../../../../js/jquery-1.12.3.min.js"></script>
    <script src="../../../../js/bootstrap.min.js"></script>
    <script src="../../../../js/isotope.pkgd.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.1/imagesloaded.pkgd.min.js"></script>
    <script src="../../../../js/hugo-academic.js"></script>
    

    
    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-18401403-1', 'auto');
        ga('send', 'pageview');

         
        var links = document.querySelectorAll('a');
        Array.prototype.map.call(links, function(item) {
            if (item.host != document.location.host) {
                item.addEventListener('click', function() {
                    var action = item.getAttribute('data-action') || 'follow';
                    ga('send', 'event', 'outbound', action, item.href);
                });
            }
        });
    </script>
    

    
    
      
      <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/highlight.min.js"></script>

      

      

      <script>hljs.initHighlightingOnLoad();</script>
    

    
    
    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({ tex2jax: { inlineMath: [['$','$'], ['\\(','\\)']] } });
    </script>
    <script async src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_CHTML"></script>
    

  </body>
</html>

   