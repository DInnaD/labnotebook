<!DOCTYPE html>
<html lang="en-us">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="generator" content="Hugo 0.20.2" />
  <meta name="author" content="Carl Boettiger">
  

  
  
  
    
    
    <link rel="stylesheet" href="../../../../css/highlight.min.css">
    
  
  
  <link rel="stylesheet" href="../../../../css/bootstrap.min.css">
  <link rel="stylesheet" href="../../../../css/font-awesome.min.css">
  <link rel="stylesheet" href="../../../../css/academicons.min.css">
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lato:400,700|Merriweather|Roboto+Mono">
  
  
    <link rel="stylesheet" href="../../../../css/cboettig.css">
  
  
  <link rel="alternate" href="../../../../index.xml" type="application/rss+xml" title="Boettiger Group">
  <link rel="feed" href="../../../../index.xml" type="application/rss+xml" title="Boettiger Group">

  <link rel="icon" type="image/png" href="../../../../img/icon.png">
  <link rel="apple-touch-icon" type="image/png" href="../../../../img/apple-touch-icon.png">
  <link rel="canonical" href="../../../../2011/06/10/workflows-that-work-making-it-easy-enough/">


  <title>Workflows that Work: making it &#34;easy enough&#34; | Boettiger Group</title>

</head>
<body id="top" data-spy="scroll" data-target="#navbar-main" data-offset="71">


<nav class="navbar navbar-default navbar-fixed-top" id="navbar-main">
  <div class="container">

    
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
              data-target=".navbar-collapse" aria-expanded="false">
        <span class="sr-only"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../../../../">Boettiger Group</a>
    </div>

    
    <div class="collapse navbar-collapse">

      
      <ul class="nav navbar-nav navbar-right">
        

        

        <li class="nav-item">
          <a href="../../../../index.html">
            
            <span>Home</span>
          </a>
        </li>

        
        

        

        <li class="nav-item">
          <a href="../../../../members/">
            
            <span>Members</span>
          </a>
        </li>

        
        

        

        <li class="nav-item">
          <a href="../../../../vita/">
            
            <span>Publications</span>
          </a>
        </li>

        
        

        

        <li class="nav-item">
          <a href="../../../../teaching/">
            
            <span>Teaching</span>
          </a>
        </li>

        
        

        

        <li class="nav-item">
          <a href="../../../../lab-notebook">
            
            <span>Lab Notebook</span>
          </a>
        </li>

        
        
      </ul>

    </div>
  </div>
</nav>


<div class="row">
  <div class="col-md-7 col-md-offset-1">
    <article>
    <h1>Workflows that Work: making it &#34;easy enough&#34;</h1> 
      
    

<p>I thought I had already fixed this problem.  I thought I already had a way to recover the code and parameter values of figures saved in my image log.  Grab the SHA hash from the comment, go to the relevant repository on github, search the commit history for the commit, find the version of that file that was current at that time of commit (which could be in an earlier version if nothing had changed&hellip;) and so forth&hellip;  Instead, I would catch myself re-running the code with parameters I knew (I&rsquo;d scribble somewhere), just so I could be sure.   And these are not fast codes to re-run.  Sure, it was <em>possible</em>.  It just wasn&rsquo;t <em>easy enough</em>.  So I took a few hours to rewrite my socialR package to handle this properly.  Goodbye SHA hash and search, hello direct links.</p>

<h2 id="linked-reproducible-scripts">Linked reproducible scripts</h2>

<p>I run a script and it produces some graphical output, like this:</p>

<p><img src="http://farm6.staticflickr.com/5103/5819249612_7ac010a792_o.png" alt="" /></p>

<p>Clicking on the image takes you to its place in the flickr photostream.  It has been automatically tagged, and the comment includes a direct link to a version-stable copy of the sourcecode that created it.  From the code page, we get a lot more information than just the source.</p>

<p><img src="http://farm4.staticflickr.com/3530/5819272546_291d289b4c_o.png" alt="" /></p>

<ul>
<li><p>We can see the package that it depends on, and grab all the dependencies by using git to pull this SHA commit hash.</p></li>

<li><p>We can view the commit history of this particular file (click history).  Clicking then on any item shows a marked up diff of the file.</p></li>

<li><p>If logged in to github, I can add line notes and comments to the diff pages, just as I can add comments in flickr.</p></li>

<li><p>Full suite of other abilities of both flickr and github, comments.  For instance, I can actually edit and commit changes to the code directly on github, or use flickr&rsquo;s built-in photo editor.  Tag, search, and social functions also available.</p></li>
</ul>

<p><img src="http://farm3.staticflickr.com/2526/5819272524_2fed292477_o.png" alt="" /></p>

<p>The links to the images and code can also be sent to me from my computer&rsquo;s twitter account:</p>

<p>[blackbirdpie url=&ldquo;<a href="http://twitter.com/#!/tweeting_cpu/status/79278116543012864&quot;">http://twitter.com/#!/tweeting_cpu/status/79278116543012864&quot;</a>]</p>

<p>Viewing the tweet in the browser will actually show the image with the tweet, otherwise the links can quickly show me the figures or code.  A similar tweet can be sent on the case of an error (if in batch mode only, the machine knows not to tweet if I&rsquo;m <em>right here</em>),  giving a timestamped link to the code and the name of the machine on which the run occurred.  A mention can get my attention and a unique hash tags help quickly check for other output by the same machine.</p>

<p><a href="http://twitter.com/#!/tweeting_cpu/status/79278121827827713">http://twitter.com/#!/tweeting_cpu/status/79278121827827713</a></p>

<h2 id="adding-reporting-to-the-r-scripts">Adding Reporting to the R Scripts</h2>

<p>A bit more overhead is required in the code than simply loading the package and calling the report function (currently called &ldquo;upload&rdquo;).</p>

<ul>
<li><p>We need to specify the script name.</p></li>

<li><p>We also must specify the commits manually, (not necessary if everything is committed before each batch run &hellip; but I&rsquo;m not that perfect).</p></li>

<li><p>We must define a bit of information about the repository structure, though it will guess for my standard use cases.</p></li>

<li><p>Then we can add optional information like tags, turn on the error reporting, etc.  An example script with these features looks like:</p></li>
</ul>

<p>[gist id=1019567]</p>

<h3 id="possible-concerns">Possible concerns</h3>

<ul>
<li><p>Commits only the current script.  This assures the version number corresponds to a commit to this actual file, though links will work correctly regardless.  (Do all files exist as url at the end of all commits?   &ndash; Yes.)</p></li>

<li><p>Possible errors: installed version is older than the other files committed.  Would ideally run R CMD INSTALL and git commit -a before running any scripts, but oh well.</p></li>
</ul>

    </article>
  </div>
  <div class="col-md-4">
    <div class="sidebar">
      <aside prefix="og:http://ogp.me/ns/article#">
  
  
  
<div class="article-metadata">

  <p>
  <span class="article-date">
    <i class="fa fa-calendar"></i>
    
    <time datetime="2011-06-10 13:31:07 &#43;0000 UTC" itemprop="datePublished">
      Fri, Jun 10, 2011
    </time>
    
  </span>
  </p>
    

  <p>
  
  
  
  <span class="article-categories">
    <i class="fa fa-folder"></i>
    
    <a href="../../../../categories/open-science">open-science</a
    >
    
  </span>
  
  
  </p>
  
  <p>
  
  </p>

</div>

 
  <br />
  
  <p><a class="btn btn-default" rel="prev" href='../../../../2011/06/10/friday-6/'><i class="fa fa-chevron-left"></i> prev</a>
    <a class="btn btn-default" rel="next" href='../../../../2011/06/09/mcmc-and-bootstrapped-likelihood-runs-on-parrotfish-tree/'>next <i class="fa fa-chevron-right"></i></a></p>

  <br />

  <p> <a class="btn btn-default" 
         href="https://github.com/cboettig/cboettig.github.io/commits/master/content/lab-notebook/2011-06-10-workflows-that-work-making-it-easy-enough.md"><i class="fa fa-clock-o"></i> history</a></p>

  <p> <i class="fa fa-barcode"></i> SHA: <a href="https://github.com/cboettig/cboettig.github.io/blob/21c35f18f26809fba50d510222998c5f9963fff4/content/lab-notebook/2011-06-10-workflows-that-work-making-it-easy-enough.md">21c35f1</a></p> 


</aside>

    </div>
  </div>
</div>


<section id="comments">
  <div id="disqus_thread">
    
  </div>
</section>

<footer class="site-footer">
  <hr />
  <div class="container">

  <div class="row">
    <div class="col-md-3 col-xs-4 socialicons" style="font-size:20px" typeof="foaf:Person" about="https://carlboettiger.info/#me">
      <p>
      <script type="text/javascript" src="../../../../js/obfuscate-email-link.js"></script> 

          <a rel="foaf:account" href="https://twitter.com/cboettig" 
             onclick="recordOutboundLink(this, 'Outbound Links', 'Twitter'); 
             return false;"><span class="showtooltip" title="follow me on twitter (reading, discussing)"><i class="fa fa-twitter"></i></span></a> 

          <a rel="foaf:account" href="https://github.com/cboettig" 
             onclick="recordOutboundLink(this, 'Outbound Links', 'Github'); 
             return false;"><span class="showtooltip" title="follow me on Github (code, research)"><i class="fa fa-github"></i></span></a>
           <a rel="foaf:weblog" type="application/atom+xml" href="../../../../index.xml"  
        class="showtooltip" title="RSS feeds for my blog-style entries." 
         onclick="recordOutboundLink(this, 'Outbound Links', 'RSS'); 
         return false;"><i class="fa fa-rss"></i></a>
       </p>
    </div>

    
    


    <div class="col-md-4 col-md-offset-1 col-xs-4">
	    <p><a onclick="recordOutboundLink(this, 'Outbound Links', 'ONS_claim'); return false;" href="http://onsclaims.wikispaces.com/"><img src="../../../../img/ons-aci2-icon.svg" alt="ONS" class="showtooltip" title="An Open Notebook Science (ONS) project claim: Entry provides all content (AC) immediately (I) or without significant delay.  See link for details"/></a></p>
    </div>


    <div class="col-md-3 col-md-offset-1 col-xs-4">
      <p>
      <a rel="license" property="http://creativecommons.org/ns#license" href="http://creativecommons.org/publicdomain/zero/1.0/" onclick="recordOutboundLink(this, 'Outbound Links', 'CC0'); return false;"><img src="../../../../img/cc-zero.svg" alt="CC0"/></a> 
      </p>
    </div>
  </div>
</footer>


    <script src="//cdnjs.cloudflare.com/ajax/libs/gsap/1.18.4/TweenMax.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/gsap/latest/plugins/ScrollToPlugin.min.js"></script>
    <script src="../../../../js/jquery-1.12.3.min.js"></script>
    <script src="../../../../js/bootstrap.min.js"></script>
    <script src="../../../../js/isotope.pkgd.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.1/imagesloaded.pkgd.min.js"></script>
    <script src="../../../../js/hugo-academic.js"></script>
    

    
    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-18401403-1', 'auto');
        ga('send', 'pageview');

         
        var links = document.querySelectorAll('a');
        Array.prototype.map.call(links, function(item) {
            if (item.host != document.location.host) {
                item.addEventListener('click', function() {
                    var action = item.getAttribute('data-action') || 'follow';
                    ga('send', 'event', 'outbound', action, item.href);
                });
            }
        });
    </script>
    

    
    
      
      <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/highlight.min.js"></script>

      

      

      <script>hljs.initHighlightingOnLoad();</script>
    

    
    

  </body>
</html>

 
