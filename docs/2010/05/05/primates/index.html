<!DOCTYPE html>
<html lang="en-us">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="generator" content="Hugo 0.21" />
  <meta name="author" content="Carl Boettiger">
  

  
  
  
    
    
    <link rel="stylesheet" href="../../../../css/highlight.min.css">
    
  
  
  <link rel="stylesheet" href="../../../../css/bootstrap.min.css">
  <link rel="stylesheet" href="../../../../css/font-awesome.min.css">
  <link rel="stylesheet" href="../../../../css/academicons.min.css">
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lato:400,700|Merriweather|Roboto+Mono">
  
  
    <link rel="stylesheet" href="../../../../css/cboettig.css">
  
  
  <link rel="alternate" href="../../../../index.xml" type="application/rss+xml" title="Boettiger Group">
  <link rel="feed" href="../../../../index.xml" type="application/rss+xml" title="Boettiger Group">

  <link rel="icon" type="image/png" href="../../../../img/icon.png">
  <link rel="apple-touch-icon" type="image/png" href="../../../../img/apple-touch-icon.png">
  <link rel="canonical" href="../../../../2010/05/05/primates/">


  <title>Primates | Boettiger Group</title>

</head>
<body id="top" data-spy="scroll" data-target="#navbar-main" data-offset="71">


<nav class="navbar navbar-default navbar-fixed-top" id="navbar-main">
  <div class="container">

    
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
              data-target=".navbar-collapse" aria-expanded="false">
        <span class="sr-only"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../../../../">Boettiger Group</a>
    </div>

    
    <div class="collapse navbar-collapse">

      
      <ul class="nav navbar-nav navbar-right">
        

        

        <li class="nav-item">
          <a href="../../../../index.html">
            
            <span>Home</span>
          </a>
        </li>

        
        

        

        <li class="nav-item">
          <a href="../../../../members/">
            
            <span>Members</span>
          </a>
        </li>

        
        

        

        <li class="nav-item">
          <a href="../../../../vita/">
            
            <span>Publications</span>
          </a>
        </li>

        
        

        

        <li class="nav-item">
          <a href="../../../../teaching/">
            
            <span>Teaching</span>
          </a>
        </li>

        
        

        

        <li class="nav-item">
          <a href="../../../../lab-notebook">
            
            <span>Lab Notebook</span>
          </a>
        </li>

        
        
      </ul>

    </div>
  </div>
</nav>


<div class = "container">


<div class="row">
  <div class="col-md-7 col-md-offset-1">
    <article>
    <h1>Primates</h1> 
      
    

<ul>
<li><p>Primates project now has a <a href="http://github.com/cboettig/sandbox" title="http://github.com/cboettig/sandbox">Github
repository</a>.
Updates are embedded from here.</p></li>

<li><p>Experimenting with distributing code and data effectively. Pluses
and minuses of three options:</p></li>
</ul>

<ol>
<li>zipped file with R code and data. Requires setting working
directory, harder to update. Subsequent uploads must include all the
data, rather than incremental.</li>
<li>Directly grab repository over github. Simple to update and access,
stores only incremental changes. Requires knowledge of git</li>
<li>R package: Nicely integrates data, code, and documentation. Requires
installing R packages.</li>
</ol>

<ul>
<li>Learning the R packaging system for data. You can have .R files in
the data/ directory of a package. The call to the data() function
runs those files from that directory, making it unnecessary to
specify the path to the data and allowing the use of complicated
functions, see the example from the ape package:</li>
</ul>

<pre><code class="language-de1">require(ape, quietly = TRUE, save = FALSE)
bird.orders &lt;- read.tree(&quot;bird.orders.tre&quot;)
</code></pre>

<hr />

<p></p>

<h2 id="primate-phylogeny">Primate Phylogeny</h2>

<p><strong>Carl Boettiger 00:37, 30 April 2010 (EDT)</strong>:</p>

<ul>
<li>Simon sent me the tree data from their paper:</li>
</ul>

<ol>
<li><a href="http://eutils.ncbi.nlm.nih.gov/entrez/eutils/elink.fcgi?cmd=prlinks&amp;dbfrom=pubmed&amp;retmode=ref&amp;id=19860891 &quot;View or buy article from publisher (if available">Chatterjee HJ, Ho SY, Barnes I, and Groves C.
.</a>&rdquo;)
pmid:19860891.
<a href="http://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&amp;rettype=abstract&amp;id=19860891" title="PMID 19860891">PubMed</a>
<a href="http://www.hubmed.org/display.cgi?uids=19860891" title="PMID 19860891">HubMed</a>
[primates]</li>
</ol>

<ul>
<li>This is the first calibrated ultrametric tree I&rsquo;ve been able to
couple to the primate data Daniel provided. I&rsquo;ve preformed a quick
ancestral state reconstruction on log brain weight (warmer colors
are more massive).</li>
</ul>

<p><br />
 <img src="http://openwetware.org/images/9/96/Primates.png" alt="Image:Primates.png" /></p>

<p></p>

<h3 id="r-code-to-create-figure">R code to create figure</h3>

<pre><code class="language-de1">library(ape)
library(geiger)
genera_set &lt;- read.nexus(&quot;mt.genera.ucld.trees&quot;)
nuc_set &lt;- read.nexus(&quot;nuc.ucld.trees&quot;)
genera &lt;- genera_set[[1]]
nuc &lt;- nuc_set[[1]]
nuc_names &lt;- nuc$tip.label
genera_names &lt;- genera$tip.label
traits &lt;- read.csv(&quot;Primate_brain_comparisons.csv&quot;)
 
dups &lt;- duplicated(traits[['Genus']])
trait_names &lt;- as.character(traits$Genus[!dups])
x &lt;- traits$log_brain.weight[!dups]
names(x) &lt;- trait_names
 
 
compare &lt;- treedata(nuc, x)
plot(compare$phy)
out &lt;- ace(compare$data, compare$phy)
 
# a similar function but for the continuous ancestral state 
plot_cts_ancestor &lt;- function(phy, data, ancestral){  
    plot(phy) # just to get treelength 
    treelen &lt;- max(axisPhylo() )
    plot(compare$phy, cex=1, x.lim=1.3*treelen, edge.width=2)
    mycol &lt;- function(x){
    tmp = (x - min(data)) /max(x-min(data)) 
    rgb(blue = 1-tmp, green=0, red = tmp )
    }
    nodelabels(pch=19, col=mycol(ancestral$ace), cex=1.5  )
    tiplabels(pch=19, col=mycol(data), cex=1.5, adj=0.5) # add tip color code
    }
plot_cts_ancestor(compare$phy, compare$data, out)
</code></pre>

<ul>
<li>This is essentially just at the proof of concept level. A couple
obvious steps:</li>
</ul>

<ol>
<li>This uses a single tree from the posterior distribution of trees,
which we&rsquo;ll eventually want to average over in the parameter
estimation. Meanwhile should use a consensus MLE tree instead.</li>
<li>Trees are resolved to genus level, so traits should be genus
averages (instead of subsamples).</li>
<li>Ancestral state reconstruction under the Brownian Motion model is
the most preliminary treatment, will certainly be interesting to
consider the various multi-peak OU models and identify potential
transitions between peaks, as well as power analysis for the model
fits.</li>
<li>Multidimensional trait inference should also be interesting</li>
</ol>

<ul>
<li>Possible bug? The Homo/Pan and Gorilla/Pan nodes would be expected
to be in the Gorilla/Pan colour rather than the Homo colour.</li>
</ul>

<h3 id="code-and-data-on-github">Code and data on Github</h3>

<p>New github repository for sharing code and data:
<strong><a href="http://github.com/cboettig/sandbox" title="http://github.com/cboettig/sandbox">sandbox</a></strong></p>

<ul>
<li>Grab this repository using git:</li>
</ul>

<!-- -->

<pre><code> git clone git://github.com/cboettig/sandbox.git
</code></pre>

<ul>
<li>Revert to this edit&rsquo;s version of code and data using git:</li>
</ul>

<!-- -->

<pre><code> git checkout 77af6613db294ca068cf
</code></pre>

<ul>
<li><p><a href="http://github.com/downloads/cboettig/sandbox/sandbox_0.0-1.tar.gz" title="http://github.com/downloads/cboettig/sandbox/sandbox_0.0-1.tar.gz">Download</a>
the snapshot as an R package. More information on the <a href="http://github.com/cboettig/sandbox/downloads" title="http://github.com/cboettig/sandbox/downloads">downloads
page</a>
of repository.</p></li>

<li><p><strong>Carl Boettiger 16:17, 5 May 2010 (EDT)</strong>:</p></li>

<li><p>Updated git version using R package is:</p></li>
</ul>

<!-- -->

<pre><code> git checkout b1a90ad97b90d9cbeaa7
</code></pre>

<p></p>

    </article>
  </div>
  <div class="col-md-4">
    <div class="sidebar">
      <aside prefix="og:http://ogp.me/ns/article#">
  
  
  
<div class="article-metadata">

  <p>
  <span class="article-date">
    <i class="fa fa-calendar"></i>
    
    <time datetime="2010-05-05 00:00:00 &#43;0000 UTC" itemprop="datePublished">
      Wed, May 5, 2010
    </time>
    
  </span>
  </p>
    

  <p>
  
  
  
  <span class="article-categories">
    <i class="fa fa-folder"></i>
    
    <a href="../../../../categories/evolution">evolution</a
    >
    
  </span>
  
  
  </p>
  
  <p>
  
  
  
  <span class="article-tags">
    <i class="fa fa-tags"></i>
    
    <a href="../../../../tags/code-tricks">code-tricks</a
    >, 
    
    <a href="../../../../tags/primates">Primates</a
    >
    
  </span>
  
  
  </p>

</div>

 
  <br />
  
  <p><a class="btn btn-default" rel="prev" href='../../../../2010/05/06/goals/'><i class="fa fa-chevron-left"></i> prev</a>
    <a class="btn btn-default" rel="next" href='../../../../2010/05/05/wednesday/'>next <i class="fa fa-chevron-right"></i></a></p>

  <br />

  <p> <a class="btn btn-default" 
         href="https://github.com/cboettig/cboettig.github.io/commits/master/content/lab-notebook/2010-05-05-Primates.md"><i class="fa fa-clock-o"></i> history</a></p>

  <p> <i class="fa fa-barcode"></i> SHA: <a href="https://github.com/cboettig/cboettig.github.io/blob/9d9072923c46d635718a4624d6afff6b1ec2439f/content/lab-notebook/2010-05-05-Primates.md">9d90729</a></p> 


</aside>

    </div>
  </div>
</div>


<section id="comments">
  <div id="disqus_thread">
    <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'cboettig';
    var disqus_identifier = '\/2010\/05\/05\/primates\/';
    var disqus_title = 'Primates';
    var disqus_url = '\/2010\/05\/05\/primates\/';

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
  </div>
</section>


</div>

<footer class="site-footer">
  <hr />
  <div class="container">

  <div class="row">
    <div class="col-md-3 col-xs-4 socialicons" style="font-size:20px" typeof="foaf:Person" about="https://carlboettiger.info/#me">
      <p>
      <script type="text/javascript" src="../../../../js/obfuscate-email-link.js"></script> 

          <a rel="foaf:account" href="https://twitter.com/cboettig" 
             onclick="recordOutboundLink(this, 'Outbound Links', 'Twitter'); 
             return false;"><span class="showtooltip" title="follow me on twitter (reading, discussing)"><i class="fa fa-twitter"></i></span></a> 

          <a rel="foaf:account" href="https://github.com/cboettig" 
             onclick="recordOutboundLink(this, 'Outbound Links', 'Github'); 
             return false;"><span class="showtooltip" title="follow me on Github (code, research)"><i class="fa fa-github"></i></span></a>
           <a rel="foaf:weblog" type="application/atom+xml" href="../../../../index.xml"  
        class="showtooltip" title="RSS feeds for my blog-style entries." 
         onclick="recordOutboundLink(this, 'Outbound Links', 'RSS'); 
         return false;"><i class="fa fa-rss"></i></a>
       </p>
    </div>

    
    


    <div class="col-md-4 col-md-offset-1 col-xs-4">
	    <p><a onclick="recordOutboundLink(this, 'Outbound Links', 'ONS_claim'); return false;" href="http://onsclaims.wikispaces.com/"><img src="../../../../img/ons-aci2-icon.svg" alt="ONS" class="showtooltip" title="An Open Notebook Science (ONS) project claim: Entry provides all content (AC) immediately (I) or without significant delay.  See link for details"/></a></p>
    </div>


    <div class="col-md-3 col-md-offset-1 col-xs-4">
      <p>
      <a rel="license" property="http://creativecommons.org/ns#license" href="http://creativecommons.org/publicdomain/zero/1.0/" onclick="recordOutboundLink(this, 'Outbound Links', 'CC0'); return false;"><img src="../../../../img/cc-zero.svg" alt="CC0"/></a> 
      </p>
    </div>
  </div>
</footer>


    <script src="//cdnjs.cloudflare.com/ajax/libs/gsap/1.18.4/TweenMax.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/gsap/latest/plugins/ScrollToPlugin.min.js"></script>
    <script src="../../../../js/jquery-1.12.3.min.js"></script>
    <script src="../../../../js/bootstrap.min.js"></script>
    <script src="../../../../js/isotope.pkgd.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.1/imagesloaded.pkgd.min.js"></script>
    <script src="../../../../js/hugo-academic.js"></script>
    

    
    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-18401403-1', 'auto');
        ga('send', 'pageview');

         
        var links = document.querySelectorAll('a');
        Array.prototype.map.call(links, function(item) {
            if (item.host != document.location.host) {
                item.addEventListener('click', function() {
                    var action = item.getAttribute('data-action') || 'follow';
                    ga('send', 'event', 'outbound', action, item.href);
                });
            }
        });
    </script>
    

    
    
      
      <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/highlight.min.js"></script>

      

      

      <script>hljs.initHighlightingOnLoad();</script>
    

    
    
    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({ tex2jax: { inlineMath: [['$','$'], ['\\(','\\)']] } });
    </script>
    <script async src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_CHTML"></script>
    

  </body>
</html>

   