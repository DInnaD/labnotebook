<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
  <head prefix="dc: http://purl.org/dc/terms/ og: http://ogp.me/ns#"> <!-- namespaces used in metadata.html -->
  <meta http-equiv='Content-Type' content='text/html; charset=utf-8'/>
  <title>Lab Notebook</title>
  <meta name="author" content="Carl Boettiger" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <!-- HTML5 metadata -->
<meta name="keywords" content="" />
<meta name="description" content="" />
<!-- RDFa Metadata (in DublinCore) -->
<meta property="dc:title" content="Lab Notebook" />
<meta property="dc:creator" content="Carl Boettiger" />
<meta property="dc:date" content="" />
<meta property="dc:format" content="text/html" />
<meta property="dc:language" content="en" />
<meta property="dc:identifier" content="/lab-notebook.html" />
<meta property="dc:rights" content="CC0" />
<meta property="dc:source" content="Lab Notebook" />
<meta property="dc:subject" content="Ecology" /> 
<meta property="dc:type" content="website" /> 
<!-- RDFa Metadata (in OpenGraph) -->
<meta property="og:title" content="Lab Notebook" />
<meta property="og:author" content="http://www.carlboettiger.info/index.html#me" />  <!-- Should be Liquid? URI? -->
<meta property="http://ogp.me/ns/profile#first_name" content="Carl"/>
<meta property="http://ogp.me/ns/profile#last_name" content="Boettiger"/>
<meta property="http://ogp.me/ns/article#published_time" content="" />
<meta property="og:site_name" content="Lab Notebook" /> <!-- Same as dc:source? -->
<meta property="og:url" content="http://www.carlboettiger.info/lab-notebook.html" />
<meta property="og:type" content="website" /> 
<!-- Google Scholar Metadata -->
<!--
<meta name="citation_author" content="Carl Boettiger"/>
<meta name="citation_date" content=""/>
<meta name="citation_title" content="Lab Notebook"/>
<meta name="citation_journal_title" content="Lab Notebook"/>
-->
<!--NOTE: see also the COinS Metadata in span element in footer -->




  <link href="/assets/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>
  <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
  <!-- Help the browser identify the RSS feed automatically -->
  <link rel="alternate" type="application/rss+xml" title="Carl Boettiger's Lab Notebook" href="/blog.xml" />
</head>


  <body prefix="dc: http://purl.org/dc/terms/ foaf: http://xmlns.com/foaf/0.1/"> 
    <!-- Navbar  ================================================== -->

<nav class="navbar navbar-default" role="navigation">
  <div class="container-fluid">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="/README.html"><i class="icon-info-sign"></i></a>
    </div>

 <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav">

          <li  >
          <a href="/index.html">Home</a></li>
          <li  >
          <a href="/vita.html">Vita</a></li>
          <li  >
          <a href="/research.html">Research</a></li>
          <li  >
          <a href="/teaching.html">Teaching</a></li>
          <li  >
          <a href="/community.html">Community</a></li>
          <li  class="active" >
          <a href="/lab-notebook.html">Lab Notebook</a></li>

        </ul>

      <!-- Search site using Google's index -->
        <form class="navbar-form navbar-right" role="search" method="get" action="http://google.com/search">
          <div class="form-group">
            <input type="hidden" name="q" value="site:carlboettiger.info" />
            <input type="text" class="form-control search-query" name="q" placeholder="Search"/>
          </div>
          <button class="btn btn-mini" type="submit"><i class="icon-search"></i></button> 
       </form>

    </div><!--/.nav-collapse -->
  </div> <!-- /container -->
</nav>



    <div class="container"> <!-- Responsive grid layout, doesn't jump to full-width --> 
      <header>
        <h1 class="entry-title">Lab Notebook</h1>
        <h2>(<a href="http://www.carlboettiger.info/2012/09/28/Welcome-to-my-lab-notebook.html">Introduction</a>)</h2>
      </header>

      <div class="row feed">
  <div class="col-md-3 col-md-offset-1">
    <h4>  <a property="account" href="https://github.com/cboettig" onclick="recordOutboundLink(this, 'Outbound Links', 'Github'); return false;"><i class="icon-github" alt="github"></i> Coding </a></h4> 
    <div class="excerpt">
      <div class="scroll">
        <ul><li>cboettig pushed to master at cboettig/labnotebook: <em>fix broken link</em> <a href="https://github.com/cboettig/labnotebook/compare/8beaad1e82...bdb9d2aa60">04:56 2014/09/05</a></li><li>cboettig pushed to master at cboettig/docker: <em>Update .drone.yml</em> <a href="https://github.com/cboettig/docker/compare/537fc99244...5b5c8dd9d6">04:48 2014/09/05</a></li><li>cboettig pushed to master at cboettig/docker: <em>Update .drone.yml</em> <a href="https://github.com/cboettig/docker/compare/c18129a2c3...537fc99244">04:46 2014/09/05</a></li><li>cboettig pushed to master at cboettig/docker: <em>Update .drone.yml</em> <a href="https://github.com/cboettig/docker/compare/216d0ee2a9...c18129a2c3">04:29 2014/09/05</a></li><li>cboettig pushed to master at cboettig/docker: <em>Update .drone.yml</em> <a href="https://github.com/cboettig/docker/compare/9514cac3ed...216d0ee2a9">04:28 2014/09/05</a></li></ul>
      </div>
    </div>
  </div>
  <div class="col-md-3">
    <h4> <a property="account" href="https://twitter.com/cboettig" onclick="recordOutboundLink(this, 'Outbound Links', 'Twitter'); return false;"><i class="icon-twitter"></i> Discussing </a></h4> 
     <div class="excerpt">
      <div class="scroll">
       <ul><li><p>RT @Richvn: Bootcamps to teach scientists computing skills @kaythaney discusses @swcarpentry: <a href="http://t.co/l1RA5nRzkW">http://t.co/l1RA5nRzkW</a></p>
 <a href="http://twitter.com/cboettig/statuses/507592077983506432">06:12 2014/09/04</a> </li><li><p>&quot;Early warnings of regime shifts: evaluation of spatial indicators from a whole-ecosystem experiment&quot; <a href="http://t.co/sI7mbzv4AY">http://t.co/sI7mbzv4AY</a></p>
 <a href="http://twitter.com/cboettig/statuses/506850184760803328">05:04 2014/09/02</a> </li><li><p>@emgbotany Others have also pointed that out for some time, but it&#39;s nice to see this review draw more attention to the issue [2]/[2]</p>
 <a href="http://twitter.com/cboettig/statuses/506295991952093184">04:22 2014/09/01</a> </li><li><p>@emgbotany Yup, I think spatial autocorrelation is routinely mistaken for environmental niche matching and too often ignored [1]/[2]</p>
 <a href="http://twitter.com/cboettig/statuses/506295821168807937">04:21 2014/09/01</a> </li><li><p>Mistaking geography for biology: inferring processes from species distributions: Trends in Ecology &amp; Evolution <a href="http://t.co/7uXR4hca5X">http://t.co/7uXR4hca5X</a></p>
 <a href="http://twitter.com/cboettig/statuses/505750404831780864">04:14 2014/08/30</a> </li></ul>
      </div>
    </div> 
  </div> 
  <div class="col-md-3">
    <h4> <a href="http://www.mendeley.com/groups/634301/theoretical-ecology/papers/" onClick="recordOutboundLink(this, 'Outbound Links', 'Mendeley'); return false;"><i class="icon-book"></i> Reading </a></h4> 
    <div class="excerpt">
      <div class="scroll">
<ul><li>Uncertainty , learning , and the optimal management of wildlife: Environmental and Ecological Statistics (2001). Volume: 8, Issue: 3. Pages: 269-288. Byron K. Williams et al. <a href="http://www.mendeley.com/c/7050293034/g/634301/williams-2001-uncertainty--learning--and-the-optimal-management-of-wildlife/">08:57 2014/08/06</a></li><li>Public goods in relation to competition, cooperation, and spite: Proceedings of the National Academy of Sciences (2014). S. a. Levin et al. <a href="http://www.mendeley.com/c/7050293024/g/634301/levin-2014-public-goods-in-relation-to-competition-cooperation-and-spite/">08:57 2014/08/06</a></li><li>Effects of Recent Environmental Change on Accuracy of Inferences of Extinction Status.: Conservation biology : the journal of the Society for Conservation Biology (2014). Volume: 28, Issue: 4. Pages: 971-981. Christopher F Clements, Ben Collen, Tim M Blackburn, Owen L Petchey et al. <a href="http://www.mendeley.com/c/7050293074/g/634301/clements-2014-effects-of-recent-environmental-change-on-accuracy-of-inferences-of-extinction-status/">08:57 2014/08/06</a></li><li>Linking Indices for Biodiversity Monitoring to Extinction Risk Theory.: Conservation biology : the journal of the Society for Conservation Biology (2014). Pages: 1-9. Michael a McCarthy, Alana L Moore, Jochen Krauss, John W Morgan, Christopher F Clements et al. <a href="http://www.mendeley.com/c/7050293084/g/634301/mccarthy-2014-linking-indices-for-biodiversity-monitoring-to-extinction-risk-theory/">08:57 2014/08/06</a></li></ul>
      </div>
    </div>
  </div> 
</div>

<hr>
<div class="row postpreview">
  <div class="col-md-11 col-md-offset-1">
    <div class="row">
      <h4> <a href="http://www.carlboettiger.info/atom.xml"
              onClick="recordOutboundLink(this,
              'Outbound Links', 'RSS'); return false;"
              style="color: inherit;"
              ><i class="icon-rss" ></i> Entries</a></h4>
      
        <div class="col-md-3">
          <header><h4><a href="/2014/08/29/docker-notes.html">Docker tricks of the trade and best practices thoughts</a></h4></header>
<p><span></span></p>
<p style="font-style:italic"> 29 Aug 2014</p>

<article>
<div class="excerpt">
<h2 id="best-practices-questions">Best practices questions</h2>
<p><em>Here are some tricks that may or may not be in keeping with best practices, input would be appreciated.</em></p>
<ul>
<li>Keep images small: use the <code>--no-install-recommends</code> option for <code>apt-get</code>, install true dependencies rather than big metapackages (like <code>texlive-full</code>).</li>
<li>Avoid creating additional AUFS layers by combining RUN commands, etc? (limit was once 42, but is now at least 127).</li>
<li><p>Can use <code>RUN git clone ...</code> to add data to a container in place of ADD, which invalidates caching.</p></li>
<li><p>Use automated builds linked to Github-based Dockerfiles rather than pushing local image builds. Not only does this make the Dockerfile transparently available and provide a link to the repository where one can file issues, but it also helps ensure that the image available on the hub gets its base image (<code>FROM</code> entry) from the hub instead of whatever was available locally. This can help avoid various out-of-sync errors that might otherwise emerge.</p></li>
</ul>
<h3 id="dockers-use-of-tags">Docker’s use of tags</h3>
<p>Unfortunately, Docker seems to use the term <code>tag</code> to refer both to the label applied to an image (e.g. in <code>docker build -t imagelabel .</code> the <code>-t</code> argument “tags” the image as ‘imagelabel’ so we need not remember its hash), but also uses <code>tag</code> to refer to the string applied to the end of an image name after a colon, e.g. <code>latest</code> in <code>ubuntu:latest</code>. The latter is the definition of “tags” as listed under the “tags” tab on the Docker Hub. Best practices for this kind of tag (which I’ll arbitrarily refer to as a ‘version tag’ to distinguish it) are unclear.</p>
<p>One case that is clear is tagging specific versions. Docker’s automated builds lets a user link a “version tag” to either to a branch or a tag in the git history. A “branch” in this case can refer either to a different git branch or merely a different sub-directory. Matching to a Git tag provides the most clear-cut use of the docker version-tag; providing a relatively static version stable link. (I say “relatively” static because even when we do not change the Dockerfile, if we re-build the Dockerfile we may get a new image due the presence of newer versions of the software included. This can be good with respect to fixing security vulnerabilities, but may also break a previously valid environment).</p>
<p>The use case that is less clear is the practice of using these “version tags” in Docker to indicate other differences between related images, such as <code>eddelbuettel/docker-ubuntu-r:add-r</code> and <code>eddelbuettel/docker-ubuntu-r:add-r-devel</code>. Why these are different tags instead of different roots is unclear, unless it is for the convenience of multiple docker files in a single Github repository. Still, it is perfectly possible to configure completely separate docker hub automated builds pointing at the same Github repo, rather than adding additional builds as tags in the same docker hub repo.</p>
<p>Docker linguistics borrow from git terminology, but it’s rather dangerous to interpret these too literally.</p>
<h2 id="keeping-a-clean-docker-environment">Keeping a clean docker environment</h2>
<ul>
<li>run interactive containers with <code>--rm</code> flag to avoid having to remove them later.</li>
<li>Clean up un-tagged docker images:</li>
</ul>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">docker</span> rmi <span class="ot">$(</span><span class="kw">docker</span> images -q --filter <span class="st">&quot;dangling=true&quot;</span><span class="ot">)</span></code></pre>
<ul>
<li>Stop and remove all containers</li>
</ul>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">docker</span> rm -f <span class="ot">$(</span><span class="kw">docker</span> ps -a -q<span class="ot">)</span></code></pre>
<h2 id="docker-and-continuous-integration">Docker and Continuous Integration</h2>
<ul>
<li><p>We can install but cannot run Docker on <a href="http://travis.org">Travis-CI</a> at this time. It appears the linux kernel available there is much too old. Maybe when they upgrade to Ubuntu 14:04 images…</p></li>
<li><p>We cannot run Docker on the docker-based <a href="http://shippable.com">Shippable-CI</a> (at least without a vagrant/virtualbox layer in-between). Docker on Docker is not possible (see below).</p></li>
<li><p>For the same reason, we cannot run Docker on <a href="http://drone.io">drone.io</a> CI. However, Drone provides an open-source version of it’s system that can be run on your own server, which unlike the fully hosted offering, permits custom images. Unfortunately I <a href="https://github.com/drone/drone/issues/54">cannot get it working</a> at this time.</p></li>
</ul>
<h2 id="docker-inside-docker">Docker inside docker:</h2>
<p>We cannot directly install docker inside a docker container. We can get around this by adding a complete virtualization layer – e.g. docker running in vagrant/virtualbox running in docker.</p>
<p>Alternatively, we can be somewhat more clever and tell our docker to simply use a different volume to store its AUFS layers. Matt Gruter has a <a href="https://github.com/mattgruter/dockerfile-doubledocker">very clever example</a> of this, which can be used, e.g. to run a Drone server (which runs docker) inside a Docker container (<a href="http://registry.hub.docker.com/u/mattgruter/drone/">mattgruter/drone</a>).</p>
<p>I believe this only works if we run the outer docker image with <code>--privileged</code> permissions, e.g. we cannot use this approach on a server like Shippable that is dropping us into a prebuilt docker container.</p>
 
<!-- not that raw_content depends on custom generator, 
     see _plugins/jekyll-labnotebook-plugins/raw_content --> 
</article> 
<p> <a href="/2014/08/29/docker-notes.html"> <em>Read more</em></a> </p>
<br />
<br />


        </div>
      
        <div class="col-md-3">
          <header><h4><a href="/2014/08/14/pdg-controlfest-notes.html">Pdg Controlfest Notes</a></h4></header>
<p><span></span></p>
<p style="font-style:italic"> 14 Aug 2014</p>

<article>
<div class="excerpt">
<p>Just wanted to give a quick update on stuff relevant to our adjustment costs paper in events of this week.</p>
<p>I think the talk on Tuesday went all right, (though thanks to a technology snafu going from reveal.js to pdf my most useful figure actually showing the bluefin tuna didn’t display – I tried not to let on). I tried to keep the focus pretty big-picture throughout (we ignore these costs when we model, they matter) and avoid being too bold / prescriptive (e.g. not suggesting we found the ‘right’ way to model these costs). I also could not stop myself from calling the adjustment cost models L1 L2 L3 instead of “linear” “quadratic” and “fixed”, or _1,2,3. whoops.</p>
<p>One question asked about asymmetric costs. You may recall we started off doing but ran into some unexpected results where they just looked like the cost free case, possibly due to problems with the code. We should probably at least say this is an area for further study.</p>
<p>Another question asked about just restricting the period of adjustment, say, once every 5 years or so. I answered that we hoped to see what cost structures “induced” that behavior rather than enforcing it explicitly; but I should probably add some mention of this to the text as well.</p>
<p>I think the other questions were more straight forward but don’t remember any particulars.</p>
<p>The Monday meeting was very helpful for me in framing the kind of big questions around the paper:</p>
<ol type="1">
<li><p>Can we make this story about more than TAC-managed fisheries? My ideal paper would be something people could cite to show that simply using profit functions with diminishing returns is not a sufficient way to reflect this reality (could be the opposite if reality is more like a transaction fee), and that this mistake can be large. But all our examples are in the fisheries context, so this may take some finesse. (Since we’re aiming for Eco Apps rather than, say, Can Jor Fisheries)</p></li>
<li><p>Emphasizing the “Pretty Darn Good” angle – thinking of the policies we derive with adjustment costs not as the “True optimum” but as a “Pretty Darn Good” policy that can be more robust to adjustment costs – (Provided you have intuition to know if those costs are more like a fixed transaction fee or some proportional cost). The last two figures help with this, since they show using policies under different cost regimes than those under which they were computed to be optimal.</p></li>
<li><p>Need to figure out what to say about policies that can ‘self-adjust’, e.g. when you don’t have to change the law to respond to the fluctuations. (Jim pointed out that Salmon are the best/only case where you can actually manage by “escapement” since you get a complete population census from the annual runs).</p></li>
</ol>
<ul>
<li>Stripping down the complexity of the charts</li>
<li>Conversely, may need to show some examples of the fish stock dynamics (In search for simplicity I’ve focused almost all the graphs on harvest dynamics).</li>
<li>Calibrating and running the case of quadratic control term for comparison</li>
</ul>
<p>As a bonus, I quickly ran the tipping point models, and it looks like these stay really close to the Reed solution – e.g. relative to the safer Beverton Holt world, they are much happier to pay whatever the adjustment cost might be to stick with the optimal than they are to risk total collapse. Not sure but maybe should add this into the paper…</p>
 
<!-- not that raw_content depends on custom generator, 
     see _plugins/jekyll-labnotebook-plugins/raw_content --> 
</article> 
<p> <a href="/2014/08/14/pdg-controlfest-notes.html"> <em>Read more</em></a> </p>
<br />
<br />


        </div>
      
        <div class="col-md-3">
          <header><h4><a href="/2014/08/14/docker-notes.html">Docker Notes</a></h4></header>
<p><span></span></p>
<p style="font-style:italic"> 14 Aug 2014</p>

<article>
<div class="excerpt">
<p>Ticking through a few more of the challenges I raised in my <a href="http://www.carlboettiger.info/2014/08/07/too-much-fun-with-docker.html">first post on docker</a>; here I explore some of the issues about facilitating interaction with a docker container so that a user’s experience is more similar to working in their own environment and less like working on a remote terminal over ssh. While technically minor, these issues are probably the first stumbling blocks in making this a valid platform for new users.</p>
<h2 id="sharing-a-local-directory">Sharing a local directory</h2>
<p>Launch a bash shell on the container that shares the current working directory of the host machine (from <code>pwd</code>) with the <code>/host</code> directory on the container (thanks to Dirk for this solution):</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">docker</span> run -it -v <span class="ot">$(</span><span class="kw">pwd</span><span class="ot">)</span>:/host cboettig/ropensci-docker /bin/bash</code></pre>
<p>This allows a user to move files on and off the container, use a familiar editor and even handle things like git commits / pulls / pushes in their working directory as before. Then the code can be executed in the containerized environment which handles all the dependencies. From the terminal docker opens, we just <code>cd /host</code> where we find our working directory files, and can launch R and run the scripts. A rather clean way of maintaining the local development experience but containerizing execution.</p>
<p>In particular, this frees us from having to pass our git credentials etc to the container, though is not so useful if we’re wanting to interact with the container via the RStudio server instead of R running in the terminal. (More on getting around this below).</p>
<p>Unfortunately, Mac and Windows users have to run Docker inside an already-virualized environment such as provided by <code>boot2docker</code> or <code>vagrant</code>. This means that it is only the directories on the virtualized environment, not those on the native OS, can be shared in this way. While one could presumably keep a directory synced between this virtual environment and the native OS, (standard in in <code>vagrant</code>), this is a problem for the easier-to-use <code>boot2docker</code> at this time: (<a href="https://github.com/docker/docker/issues/7249">docker/issues/7249</a>).</p>
<h2 id="a-docker-desktop">A Docker Desktop</h2>
<p>Dirk brought this <a href="http://blog.docker.com/2013/07/docker-desktop-your-desktop-over-ssh-running-inside-of-a-docker-container">docker-desktop</a> to my attention; which uses Xpra (in place of X11 forwarding) to provide a window with fluxbox running on Ubuntu along with common applications like libreoffce, firefox, and rox file manager. Pretty clever, and worked just fine for me, but needs Xpra on the client machine and requires some extra steps (run the container, query for passwords and ports, run ssh to connect, then run Xpra to launch the window). The result is reasonably responsive but still slower than virtualbox, and probably too slow for real work.</p>
<h2 id="base-images">Base images?</h2>
<p>The basic Ubuntu:14.04 seems like a good lightweight base image (at 192 MB), but other images try to give more useful building blocks, like <a href="https://github.com/phusion/baseimage-docker#contents">phusion/baseimage</a> (423 MB). Their <code>docker-bash</code> script and other utilities provide some handy features for managing / debugging containers.</p>
<h2 id="other-ways-to-share-files">Other ways to share files?</h2>
<p>Took a quick look at this <a href="https://github.com/gfjardim/docker-dropbox/blob/master/Dockerfile">Dockerfile for running dropbox</a>, which works rather well (at least on a linux machine, since it requires local directory sharing). Could probably be done without explicit linking to local directories to faciliate moving files on and off the container. Of course one can always scp/rsync files on and off containers if ssh is set up, but that is unlikely to be a popular solution for students.</p>
<p>While we have rstudio server running nicely in a Docker container for local or cloud use, it’s still an issue getting Github ssh keys set up to be able to push changes to a repo. We can get around this by linking to our keys directory with the same <code>-v</code> option shown above. We still need a few more steps: setting the Git username and email, and running <code>ssh-add</code> for the key. Presumably we could do this with environmental variables and some adjustment to the Dockerfile:</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">docker</span> run -it -v /path/to/keys:/home/rstudio/.ssh/ -e <span class="st">&quot;USERNAME=Carl Boettiger&quot;</span> -e <span class="st">&quot;EMAIL=cboettig@example.org&quot;</span> cboettig/ropensci-docker</code></pre>
<p>which would prevent storing these secure values on the image itself.</p>
 
<!-- not that raw_content depends on custom generator, 
     see _plugins/jekyll-labnotebook-plugins/raw_content --> 
</article> 
<p> <a href="/2014/08/14/docker-notes.html"> <em>Read more</em></a> </p>
<br />
<br />


        </div>
      
    </div>

    <div class="row">
      
        <div class="col-md-3">
          <header><h4><a href="/2014/08/08/an-appropriate-amount-of-fun-with-docker.html">An appropriate amount of fun with docker?</a></h4></header>
<p><span></span></p>
<p style="font-style:italic"> 08 Aug 2014</p>

<article>
<div class="excerpt">
<p><em>An update on my exploration with Docker. Title courtesy of <a href="https://twitter.com/DistribEcology/status/497523435371638784">Ted</a>, with my hopes that this really does move us in a direction where we can spend less time thinking about the tools and computational environments. Not there yet though</em></p>
<p>I’ve gotten RStudio Server working in the <a href="https://github.com/ropensci/docker-ubuntu-r/blob/master/add-r-ropensci/Dockerfile">ropensci-docker</a> image (Issues/pull requests welcome!).</p>
<pre><code>docker run -d -p 8787:8787 cboettig/ropensci-docker</code></pre>
<p>will make an RStudio server instance available to you in your browser at localhost:8787. (Change the first number after the -p to have a different address). You can log in with username:pw rstudio:rstudio and have fun.</p>
<p>One thing I like about this is the ease with which I can now get an RStudio server up and running in the cloud (e.g. I took this for sail on DigitalOcean.com today). This means in few minutes and 1 penny you have a URL that you and any collaborators could use to interact with R using the familiar RStudio interface, already provisioned with your data and dependencies in place.</p>
<hr />
<p>For me this is a pretty key development. It replaces a lot of command-line only interaction with probably the most familiar R environment out there, online or off. For more widespread use or teaching this probably needs to get simpler still. I’m still skeptical that this will make it out beyond the crazies, but I’m less skeptical than I was when starting this out.</p>
<p>The ropensci-docker image could no doubt be more modular (and better documented). I’d be curious to hear if anyone has had success or problems running docker on windows / mac platforms. Issues or pull requests on the repo would be welcome! https://github.com/ropensci/docker-ubuntu-r/blob/master/add-r-ropensci/Dockerfile (maybe the repo needs to be renamed from it’s original fork now too…)</p>
<p>Rich et al highlighted several “remaining challenges” in their original post. Here’s my take on where those stand in the Docker framework, though I’d welcome other impressions:</p>
<ol type="1">
<li>dependencies could still be missed by incompletely documentation</li>
</ol>
<p>I think this one is largely addressed, at least assuming a user loads the Docker image. I’m still concerned that later builds of the docker image could simply break the build (though earlier images may still be available). Does anyone know how to roll back to earlier images in docker?</p>
<ol start="2" type="1">
<li>The set of scripts for managing reproducibility are at least as complex as the analysis itself</li>
</ol>
<p>I think a lot of that size is due to the lack of an R image for Travis and the need to install many common tools from scratch. Because docker is both modular and easily shared via docker hub, it’s much easier to write a really small script that builds on existing images, (as I show in cboettig/rnexml)</p>
<ol start="3" type="1">
<li>Travis.org CI constraints: public/open github repository with analyses that run in under 50 minutes.</li>
</ol>
<p>Docker has two advantages and also some weaknesses here: (1) it should be easy to run locally, while accomplishing much of the same thing as running on travis (though clearly that’s not as nice as running automatically &amp; in the cloud on every push). (2) It’s easier to take advantage of caching – for instance, cboettig/rnexml provides the knitr cache files in the image so that a user can start exploring without waiting for all the data to download and code to run.</p>
<p>It seems that Travis CI doesn’t currently support docker since the linux kernel they use is too old. (Presumably they’ll update one day. Anyone try Shippable CI? (which supports docker))</p>
<ol start="4" type="1">
<li>The learning curve is still prohibitive</li>
</ol>
<p>I think that’s still true. But what surprised me is that I’m not sure that it’s gotten any worse by adding docker than it was to begin with using Travis CI. Because the approach can be used both locally and for scaling up in the cloud, I think it offers some more immediate payoffs to users than learning a Github+CI approach does. (Notably it doesn’t require any git just to deploy something ‘reproducible’, though of course it works nicely with git.</p>
 
<!-- not that raw_content depends on custom generator, 
     see _plugins/jekyll-labnotebook-plugins/raw_content --> 
</article> 
<p> <a href="/2014/08/08/an-appropriate-amount-of-fun-with-docker.html"> <em>Read more</em></a> </p>
<br />
<br />


        </div>
      
        <div class="col-md-3">
          <header><h4><a href="/2014/08/07/too-much-fun-with-docker.html">Too Much Fun With Docker</a></h4></header>
<p><span></span></p>
<p style="font-style:italic"> 07 Aug 2014</p>

<article>
<div class="excerpt">
<p><strong>NOTE:</strong> This post was originally drafted as a set of questions to the revived <a href="https://groups.google.com/forum/#!forum/ropensci-discuss">ropensci-discuss list</a>, hopefully readers might join the discussion from there.</p>
<p>Been thinking about Docker and the discussion about reproducible research in the comments of Rich et al’s recent post on the <a href="ropensci.org/blog/2014/06/09/reproducibility/">rOpenSci blog</a> where quite a few of people mentioned the potential for Docker as a way to facilitate this.</p>
<p>I’ve only just started playing around with Docker, and though I’m quite impressed, I’m still rather skeptical that non-crazies would ever use it productively. Nevertheless, I’ve worked up some Dockerfiles to explore how one might use this approach to transparently document and manage a computational environment, and I was hoping to get some feedback from all of you.</p>
<p>For those of you who are already much more familiar with Docker than me (or are looking for an excuse to explore!), I’d love to get your feedback on some of the particulars. For everyone, I’d be curious what you think about the general concept.</p>
<p>So far I’ve created a <a href="https://github.com/ropensci/docker-ubuntu-r/blob/master/add-r-ropensci/Dockerfile">dockerfile</a> and <a href="https://registry.hub.docker.com/u/cboettig/ropensci-docker/">image</a></p>
<p>If you have docker up and running, perhaps you can give it a test drive:</p>
<pre><code>docker run -it cboettig/ropensci-docker /bin/bash</code></pre>
<p>You should find R installed with some common packages. This image builds on Dirk Eddelbuettel’s R docker images and serves as a starting point to test individual R packages or projects.</p>
<p>For instance, my RNeXML manuscript draft is a bit more of a bear then usual to run, since it needs <code>rJava</code> (requires external libs), <code>Sxslt</code> (only available on Omegahat and requires extra libs) and latest <code>phytools</code> (a tar.gz file from Liam’s website), along with the usual mess of pandoc/latex environment to compile the manuscript itself. By building on ropensci-docker, we need a <a href="https://github.com/ropensci/RNeXML/tree/master/manuscripts/Dockerfile">pretty minimal docker file</a> to compile this environment:</p>
<p>You can test drive it (<a href="https://registry.hub.docker.com/u/cboettig/rnexml">docker image here</a>):</p>
<pre><code>docker run -it cboettig/rnexml /bin/bash</code></pre>
<p>Once in bash, launch R and run <code>rmarkdown::render(&quot;manuscript.Rmd&quot;)</code>. This will recompile the manuscript from cache and leave you to interactively explore any of the R code shown.</p>
<h2 id="advantages-goals">Advantages / Goals</h2>
<p>Being able to download a pre-compiled image means a user can run the code without dependency hell (often not as much an R problem as it is in Python, but nevertheless one that I hit frequently, particularly as my projects age), and also without altering their personal R environment. Third (in principle) this makes it easy to run the code on a cloud server, scaling the computing resources appropriately.</p>
<p>I think the real acid test for this is not merely that it recreates the results, but that others can build and extend on the work (with fewer rather than more barriers than usual). I believe most of that has nothing to do with this whole software image thing – providing the methods you use as general-purpose functions in an R package, or publishing the raw (&amp; processed) data to Dryad with good documentation will always make work more modular and easier to re-use than cracking open someone’s virtual machine. But that is really a separate issue.</p>
<p>In this context, we look for an easy way to package up whatever a researcher or group is already doing into something portable and extensible. So, is this really portable and extensible?</p>
<h2 id="concerns">Concerns:</h2>
<ol type="1">
<li><p>This presupposes someone can run docker on their OS – and from the command line at that. Perhaps that’s the biggest barrier to entry right now, (though given docker’s virulent popularity, maybe something smart people with big money might soon solve).</p></li>
<li><p>The only way to interact with thing is through a bash shell running on the container. An RStudio server might be much nicer, but I haven’t been able to get that running. <em>Anyone know how to run RStudio server from docker?</em></p></li>
</ol>
<p>(I tried &amp; <a href="https://github.com/mingfang/docker-druid/issues/2">failed</a>)</p>
<ol start="3" type="1">
<li>I don’t see how users can move local files on and off the docker container. In some ways this is a great virtue – forcing all code to use fully resolved paths like pulling data from Dryad instead of their hard-drive, and pushing results to a (possibly private) online site to view them. But obviously a barrier to entry. <em>Is there a better way to do this?</em></li>
</ol>
<h2 id="alternative-strategies">Alternative strategies</h2>
<ol type="1">
<li><p>Docker is just one of many ways to do this (particularly if you’re not concerned about maximum performance speed), and quite probably not the easiest. Our friends at Berkeley D-Lab opted for a GUI-driven virtual machine instead, built with Packer and run in Virtualbox, after their experience proved that students were much more comfortable with the mouse-driven installation and a pixel-identical environment to the instructor’s (see their excellent <a href="https://berkeley.app.box.com/s/w424gdjot3tgksidyyfl">paper</a> on this).</p></li>
<li><p>Will/should researchers be willing to work and develop in virtual environments? In some cases, the virtual environment can be closely coupled to the native one – you use your own editors etc to do all the writing, and then execute in the virtual environment (seems this is easier in docker/vagrant approach than in the BCE.</p></li>
</ol>
<!--

I would like a way for a collaborator who knows a little R to be able to open my .Rmd manuscript on his/her own computer, edit some parameters, recompile and view the pdf. RStudio w/ rmarkdown has gone a long way to making that happen.
-->




 
<!-- not that raw_content depends on custom generator, 
     see _plugins/jekyll-labnotebook-plugins/raw_content --> 
</article> 
<p> <a href="/2014/08/07/too-much-fun-with-docker.html"> <em>Read more</em></a> </p>
<br />
<br />


        </div>
      
        <div class="col-md-3">
          <header><h4><a href="/2014/08/06/notes.html">Notes</a></h4></header>
<p><span></span></p>
<p style="font-style:italic"> 06 Aug 2014</p>

<article>
<div class="excerpt">
<h2 id="writing">Writing</h2>
<ul>
<li>Working on / finishing up <a href="http://io.carlboettiger.info/pdg_control/presentation.html">slides</a> for <a href="http://eco.confex.com/eco/2014/webprogram/Session9683.html">ESA talk</a></li>
<li>and slides for <a href="http://hastingsfest.wordpress.com">hastingsfest</a></li>
</ul>
<h2 id="exploring">Exploring</h2>
<ul>
<li><p>Poking around a bit more in Docker yesterday, built some basic R containers for testing ropensci packages. <a href="https://github.com/ropensci/docker-ubuntu-r/tree/master/add-r-ropensci">https://github.com/ropensci/docker-ubuntu-r/tree/master/add-r-ropensci</a> . Somewhat skeptical but still curious about the potential (or the need) to publish a docker image as a reproducible research object.</p></li>
<li><p>Attempted to add Travis builds to the Docker repo (just for fun, eh?), but appears Docker doesn’t support the older kernel of 12.04</p></li>
<li><p>Attempted an i386 build for the BCE, but no luck. <a href="https://github.com/cboettig/collaboratool/blob/master/provisioning/BCE-14.04-i386.json">https://github.com/cboettig/collaboratool/blob/master/provisioning/BCE-14.04-i386.json</a></p></li>
</ul>
<h2 id="reading">Reading</h2>
<p>Fun <a href="http://www.theguardian.com/higher-education-network/blog/2014/aug/05/why-we-should-publish-less-scientific-research?CMP=twt_gu">piece in the Guardian</a> from Digital Science manager Timo Hannay on the future of scientific publishing. I think (or choose to believe that) the thesis is at the end rather than in the title.</p>
<p>Also commented here on DocZen’s <a href="http://neurodojo.blogspot.com/2014/08/better-deluge-than-drought.html">post</a></p>
 
<!-- not that raw_content depends on custom generator, 
     see _plugins/jekyll-labnotebook-plugins/raw_content --> 
</article> 
<p> <a href="/2014/08/06/notes.html"> <em>Read more</em></a> </p>
<br />
<br />


        </div>
      
    </div>

    <div class="row">
      
        <div class="col-md-3">
          <header><h4><a href="/2014/07/31/notes.html">Notes</a></h4></header>
<p><span></span></p>
<p style="font-style:italic"> 31 Jul 2014</p>

<article>
<div class="excerpt">
<h2 id="berkeley-collaborative-environment">Berkeley Collaborative Environment</h2>
<p>Trying out the Berkeley image (Essentially ubuntu 14.04 XFCE with ipython and RStudio installed, but finely tuned to improve user experience; e.g. solid colors for faster remote window connections.)</p>
<p>Highly recommend <a href="https://t.co/TJ9ObbL8i8">their paper</a> for the first explanation I’ve actually been able to follow that provides a definition of “DevOpts” (essentially, using scripts rather than documentation to manage consistent cross-platform installation) and explains the differences and similarities between the various programs operating in this sphere, sometimes as alternatives and simultaneously.</p>
<h4 id="virtual-machines.">Virtual machines.</h4>
<p>Their approach focuses on running on top of a complete virtual machine. Primarily considers Oracle’s <code>virtualbox</code> for local use, Amazon’s AMI for cloud use. (For an emerging alternative to the full virtual machine approach, they discuss Docker).</p>
<h4 id="configuration-management-cm-tools">Configuration management (CM) tools:</h4>
<ul>
<li><strong>Ansible</strong> (“playbooks”) used by the BCE to specify the complete software environment. Compares to: <strong>Chef</strong> (Ruby-based, “recipes”), <strong>Salt</strong> (Python based, “states”), and <strong>Puppet</strong> (“manifests”).</li>
</ul>
<h4 id="provisioning-tools">Provisioning tools:</h4>
<ul>
<li><p><strong>Packer</strong> Used at build time to create a machine image for the VM. Packer can use Ansible/Chef/Salt/Puppet files to do this. Results in a nice AMI for Amazon web console or an image for the virtualbox GUI.</p></li>
<li><p><strong>Vagrant</strong> Offers a different approach. Rather than the developer creating a VM image using Packer and Ansible script that is ready to run on virtualbox or Amazon, the end user installs vagrant instead of virtualbox. Vagrant also handles the job of Packer, in preparing an environment to run (on Vagrant’s virtual machine, rather than on virtualbox). (Note that conversely, Packer can create a Vagrant virtual machine just as easily as it can create the Oracle virtualbox or Amazon AMI). Vagrant feels a lot more native, as the user works within their familiar OS tools for editing, etc, while vagrant makes sure that the execution of the software happens in a controlled, identical environment.</p></li>
<li><p><strong>Docker</strong> offers a more modular alternative to a full virtual machine, with performance that is more like running on ‘bare metal’, sharing the kernel of the native OS; though at the moment it requires that be a linux kernel. Docker is typically deployed using Vagrant, (though stand-alone setup is emerging).</p></li>
</ul>
<p>From first glance, Vagrant sounds like a more elegant approach than having end users install Oracle’s virtual machine and then learn to live in a virtual window emulating the Ubuntu-XFCE desktop (particularly if those users are developers!). However, it seems that the BCE team found that Vagrant was harder for students to work with, since it required knowledge of the commandline.</p>
<p>The paper also provides a fabulous case study of a major scientific software project using the “DevOpts” philosophy but without any of these new and emerging tools, relying only on scripts, makefiles, and Linux distribution package managers.</p>
<h3 id="test-drive-impressions">Test drive impressions</h3>
<p>Unfortunately, no luck getting virtualization running on my laptop (due to <a href="ttps://github.com/dlab-berkeley/collaboratool/issues/created_by/cboettig">BIOS issues</a>). Testing on Ubuntu desktop required a newer version of virtualbox than what’s in the 12.04 repos, but otherwise just worked. It’s straight forward to install additional needed software, and virtualbox gives the option of preserving the machine state on exit, presumably with the software. Not clear how that should be managed to avoid re-creating the problems that using a consistent image set out to avoid in the first place; perhaps requires re-provisioning a divergent image?</p>
<p>Nice experience testing out the Amazon machine image, but I think the workflow would be improved if it provided RStudio server for a more interactive interface.</p>
<h2 id="misc-tasks">Misc tasks</h2>
<ul>
<li><p>Working on reveal.js slides</p></li>
<li><p>RNeXML manuscript edits from Francois’s comments</p></li>
</ul>
<h2 id="thoughts-on-namespaces-in-r">Thoughts on namespaces (in R)</h2>
<p><em>Chatting with Scott about namespace practices, thought I’d put some of this down.</em></p>
<p>I go back and forth on having a small namespace (particularly vs convenience functions). It is certainly easier to maintain, but from the user’s perspective I think it’s pretty easy to just ignore extra functions; as long as it’s well documented what functions they need to know to get started.</p>
<p>I guess if a user needs to know too many functions to do anything, than it becomes hard to keep track of. That’s partly why I started wrapping exposed functions. For instance, you can just use <code>nexml_write</code> all the time and never use add_characters, add_trees, etc, since <code>nexml_write</code> takes additional trees and characters as arguments.</p>
<p>But I like function calls to be as semantic as possible so the code is more self documenting. Sometimes <code>add_characters(nex)</code> is more self explanatory than <code>nexml_write(nex, characters = characters)</code>.</p>
<p>The XML package really got me started on this. There’s usually like 4 or 5 ways to do the same thing. Sometimes that’s really annoying, but sometimes it helps write more transparent code or less verbose code (e.g. adding child nodes with <code>addChildren</code> vs passing as <code>.children</code> argument to <code>newXMLNode</code> – the former tends to be more semantic, the latter often more consise).</p>
<h2 id="code-tricks-vim-pandoc">Code tricks: vim pandoc</h2>
<p>Vim pandoc syntax highlighting</p>
<ul>
<li>Recognize <code>.Rmd</code> as a pandoc-syntax file extension. In <code>.vimrc</code> do:</li>
</ul>
<pre class="vim"><code>au BufRead,BufNewFile *.Rmd set filetype=pandoc</code></pre>
<ul>
<li>Enable syntax highlighting inside code blocks, by language. In vim session, do: <code>PandocHighlight r</code>. Unfortunately doesn’t recognize the default <code>.Rmd</code> format used by RStudio. This then enables syntax highlighting, folding, etc.</li>
</ul>
<p>If I recall correctly, knitr’s default markdown syntax,</p>
<pre><code>```{r}</code></pre>
<p>was intended to be a valid markdown syntax. It seems Github Flavored markdown is happy to recognize this as markdown syntax for a code block in the R language, but while pandoc recognizes this as a code block, it does not recognize the language.</p>
<p>I believe Pandoc does recognize the format</p>
<pre><code>```{.r options}</code></pre>
<p>as the notation to specify the R language in this notation. I like this notation because it means that pandoc-aware syntax highlighters will highlight my code chunks as R code, which does not happen in the default syntax.</p>
<p>I realize I could define this as an input hook for knitr, but am reluctant to do so as it makes my code slightly less familiar/less portable to other users (e.g. RStudio expects and integrates with only the standard notation.)</p>
 
<!-- not that raw_content depends on custom generator, 
     see _plugins/jekyll-labnotebook-plugins/raw_content --> 
</article> 
<p> <a href="/2014/07/31/notes.html"> <em>Read more</em></a> </p>
<br />
<br />


        </div>
      
        <div class="col-md-3">
          <header><h4><a href="/2014/07/21/notes.html">Notes</a></h4></header>
<p><span></span></p>
<p style="font-style:italic"> 21 Jul 2014</p>

<article>
<div class="excerpt">
<h2 id="reading">Reading</h2>
<p>Looking for this in my notes and couldn’t find it: An excellent paper from the Software Sustainability Institute and friends outlining the need and possible structure for sustaining career paths for software developers. “<a href="http://dirkgorissen.com/2012/09/13/the-research-software-engineer/">The research software engineer</a>”, Dirk Gorissen. Provides a good response to the <a href="http://www.timeshighereducation.co.uk/news/save-your-work-give-software-engineers-a-career-track/2006431.article">software issues highlighted by climategate</a>, etc.</p>
<h2 id="remote-conferencing">Remote conferencing</h2>
<p>(Based on earlier unposted notes). With so much going on, it’s nice to be able to follow highlights from some conferences remotely</p>
<ul>
<li><p>From ISIC: Ben Bolker’s <a href="http://t.co/ft2sJjRNFp">slides on statistial machismo</a></p></li>
<li><p>From BOSC: C. Titus Brown’s keynote <a href="http://ivory.idyll.org/blog/2014-bosc-keynote.html">A history of bioinformatics (in 2039)</a> (see links to slides, storify).</p></li>
<li><p>From PyCon: Greg Wilson’s talk (<a href="https://www.youtube.com/watch?v=1e26rp6qPbA">youtube recording</a>) is fantastic, ending with compelling thesis for large-scale collaboration via diff/merge as the foundation of transformational change / open science, and the puzzling case of why this model has not yet been more widely adopted in generating teaching materials. Greg mentions several excellent resources in the talk as well: <a href="http://www.slideshare.net/richardcookau/john-hattie-effect-sizes-on-achievement">John Hattie’s slides on effect sizes of different classroom methods</a>, Carnegie Mellon’s summary text on decades of research, “How Learning Works” (<a href="http://c4ed.lib.kmutt.ac.th/sites/default/files/HowLearningWorks-Ambrose.pdf">pdf</a>), and Mark Guzdial’s <a href="http://computinged.wordpress.com/about/">blog on CS education</a>.</p></li>
<li><p>From ESIP: Daniel Katz’s slides on <a href="http://t.co/1fUkycXAMP">Working towards Sustainable Software for Science (an NSF and community view)</a></p></li>
</ul>
<h2 id="misc-code-tricks">Misc code-tricks</h2>
<p>For a question raised during the Mozilla sprint: had to remember how to write custom hooks for knitr (e.g. for kramdown compatibility):</p>
<pre class="sourceCode r"><code class="sourceCode r">hook.t &lt;-<span class="st"> </span>function(x, options) <span class="kw">paste0</span>(<span class="st">&quot;</span><span class="ch">\n\n</span><span class="st">~~~</span><span class="ch">\n</span><span class="st">&quot;</span>, <span class="kw">paste0</span>(x, <span class="dt">collapse=</span><span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>), <span class="st">&quot;~~~</span><span class="ch">\n\n</span><span class="st">&quot;</span>)
hook.r &lt;-<span class="st"> </span>function(x, options) {
       <span class="kw">paste0</span>(<span class="st">&quot;</span><span class="ch">\n\n</span><span class="st">~~~ &quot;</span>, <span class="kw">tolower</span>(options$engine), <span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>, <span class="kw">paste0</span>(x, <span class="dt">collapse=</span><span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>), <span class="st">&quot;</span><span class="ch">\n</span><span class="st">~~~</span><span class="ch">\n\n</span><span class="st">&quot;</span>)
  }
knitr::knit_hooks$<span class="kw">set</span>(<span class="dt">source=</span>hook.r, <span class="dt">output=</span>hook.t, <span class="dt">warning=</span>hook.t,
                              <span class="dt">error=</span>hook.t, <span class="dt">message=</span>hook.t)</code></pre>
 
<!-- not that raw_content depends on custom generator, 
     see _plugins/jekyll-labnotebook-plugins/raw_content --> 
</article> 
<p> <a href="/2014/07/21/notes.html"> <em>Read more</em></a> </p>
<br />
<br />


        </div>
      
        <div class="col-md-3">
          <header><h4><a href="/2014/07/21/UPS-and-data-vs-optimal-control.html">UPS and data vs optimal control</a></h4></header>
<p><span></span></p>
<p style="font-style:italic"> 21 Jul 2014</p>

<article>
<div class="excerpt">
<p><em>Random idea for possible further exploration:</em></p>
<p>The use of ‘big data’ by UPS to perform lots of small efficiency gains seems to be everybody’s favorite example (<a href="http://www.npr.org/blogs/money/2014/05/02/308640135/episode-536-the-future-of-work-looks-like-a-ups-truck">NPR</a>, <a href="http://www.economist.com/news/business/21607816-businesses-should-aim-lots-small-wins-big-data-add-up-something-big-little">The Economist</a>). During a typical applications of optimal control for ecological conservation talk yesterday I couldn’t help thinking back to that story. The paradigm shift is not so much the kind or amount of the data being used as it is the control levers themselves. As the Economist (rightly) argues, everyone typically assumes that a few principle actions are responsible for 80% of possible improvement.</p>
<p>Optimal control tends to focus on these big things, which are also usually particularly thorny optimizations. Most of the classic textbook hard optimization problems could have come right from the UPS case: the traveling salesman, the inventory packing/set cover problems, and so forth. Impossible to solve exactly on large networks, approximate dynamic programming approaches have since been the work-around. Yet the “Big Data” approach takes a rather different strategy all together, tackling many small problems instead of one big one. Our typical approach of theoretical abstractions to simple models is designed to focus on these big overarching problems. In abstracting the problem, we focus on the big picture stuff that should matter most – stuff like figuring out the optimal route to travel, and so forth. But when the gains through increasing optimization of these things are marginal, focusing on the “other 20%” can make more sense. However, that means abandoning the abstraction and going back to the original messy problem. It means knowing about all the other little levers and switches we can control. In the UPS context, this means thinking about how many times a truck backs up, or idles at a stop light, or what hand the deliveryman holds the pen in. Given both the data and the ability to control so many of these little things, optimizing each one in the first place can be more valuable than focusing on the big abstract optimizations.</p>
<p>So, does this work only once the heuristic solutions to the big problems are nearly optimal, so improved approximations have very limited gains? Or can this also be a route forward when the big problems are primarily intractable as well? The former certainly seems the more likely, but if the latter is true, it could prove very interesting.</p>
<p>So this got me thinking – if we accept the latter premise we find a case closely analogous to the very messy optimizations we face in conservation decision-making. Could the many little levers be an alternative? It’s unlikely given both the need for the kind of arbitrarily detailed data at almost no cost available to the UPS problem, and also the kind of totalitarian control UPS can apply to control all the little levers, while the conservation problem more frequently has nothing bit a scrawny blunt stick to toggle in the first place. Nevertheless, it’s hard to know what possible gains we have already excluded when we focus only on the big abstractions and the controls relevant to them. Could conservation decision-making think more outside the box about the many little things we might be able to more effectively influence?</p>
 
<!-- not that raw_content depends on custom generator, 
     see _plugins/jekyll-labnotebook-plugins/raw_content --> 
</article> 
<p> <a href="/2014/07/21/UPS-and-data-vs-optimal-control.html"> <em>Read more</em></a> </p>
<br />
<br />


        </div>
      
    </div>

  </div>
</div> <!--end row -->

<div class="row socialicons">
  <div class="col-md-11 col-md-offset-1">
      <p> <a href="/archive.html"><i class="icon-calendar"></i> All entries by date</a></p> 
      <p> <a href="/categories.html"><i class="icon-list"></i> All entries by category</a> </p>
      <p> <a href="/tags.html"><i class="icon-tags"></i> All entries by tag</a> </p>
  </div> <!--end col-md-9 -->
</div> <!--end row -->




      <footer class="footer">

<!--************** FOAF information to social networks ***************************** -->
  <div class="row">
    <div class="col-md-3 col-xs-4 socialicons" style="font-size:20px" typeof="foaf:Person" about="http://www.carlboettiger.info#me">
      <p>
          <script type="text/javascript" src="/assets/js/obfuscate-email-link.js"></script> 

          <a rel="foaf:account" href="https://twitter.com/cboettig" 
             onclick="recordOutboundLink(this, 'Outbound Links', 'Twitter'); 
             return false;"><span class="showtooltip" title="follow me on twitter (reading, discussing)"><i class="fa fa-twitter"></i></span></a> 

          <a rel="foaf:account" href="https://github.com/cboettig" 
             onclick="recordOutboundLink(this, 'Outbound Links', 'Github'); 
             return false;"><span class="showtooltip" title="follow me on Github (code, research)"><i class="fa fa-github"></i></span></a>
      <!--
          <a rel="foaf:account" href="https://plus.google.com/" 
             onclick="recordOutboundLink(this, 'Outbound Links', 'GPlus'); 
             return false;"><i class="fa fa-google-plus"></i></a>

          <a rel="foaf:account" href="http://www.mendeley.com/profiles/carl-boettiger" 
             onclick="recordOutboundLink(this, 'Outbound Links', 'Mendeley'); 
             return false;"><img src="/assets/img/icon-mendeley.png" /></a> 

           citations on google-scholar

           stackoverflow
      -->
      <a rel="foaf:weblog" type="application/atom+xml" href="/blog.xml"  
         class="showtooltip" title="RSS feeds for my blog-style entries. See the feed on my lab notebook (/atom.xml) to follow all entries instead." 
         onclick="recordOutboundLink(this, 'Outbound Links', 'RSS'); 
         return false;"><i class="fa fa-rss"></i></a>
       </p>
    </div>

    
    <!--**************** End social links **************************** -->


    <div class="col-md-4 col-md-offset-1 col-xs-4">
      <p><a onclick="recordOutboundLink(this, 'Outbound Links', 'ONS_claim'); return false;" href="http://onsclaims.wikispaces.com/"><img src="/assets/img/ons-aci2-icon.svg" alt="ONS" class="showtooltip" title="An Open Notebook Science (ONS) project claim: Entry provides all content (AC) immediately (I) or without significant delay.  See link for details"/></a></p>
    </div>


    <div class="col-md-3 col-md-offset-1 col-xs-4">
      <p>
      <a rel="license" property="http://creativecommons.org/ns#license" href="http://creativecommons.org/publicdomain/zero/1.0/" onclick="recordOutboundLink(this, 'Outbound Links', 'CC0'); return false;"><img src="/assets/img/cc-zero.svg" alt="CC0"/></a> 
      </p>
    </div>
  </div>


  
<!-- COinS metadata (for citation managers like Zotero etc), goes in body text -->
  <span
      class="Z3988" 
      title="ctx_ver=Z39.88-2004
      &amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Adc
      &amp;rfr_id=info%3Asid%2Focoins.info%3Agenerator
      &amp;rft.title=Lab Notebook
      &amp;rft.creator=Carl Boettiger
      &amp;rft.date=
      &amp;rft.language=EN
      &amp;rft.rights=CC0
      &amp;rft_id=http://www.carlboettiger.info/lab-notebook.html">
  </span>


</footer>




          <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

    <!-- JQuery, used on a few pages (still?) -->
    <!-- <script type="text/javascript" src="/assets/js/jquery.js"></script> -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <!-- Equations using MathJax -->
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config"> MathJax.Hub.Config({ TeX: { equationNumbers: {autoNumber: "all"} } });       </script>
    <!-- Twitter Bootstrap Javascript -->
    <!--  <script src="/assets/js/bootstrap.min.js"></script> -->
    <script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>


    

        <script type="text/javascript">
          var _gaq = _gaq || [];
          _gaq.push(['_setAccount', 'UA-18401403-1']);
          _gaq.push(['_trackPageview']);
          (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
          })();
  </script>



<script type="text/javascript">
function recordOutboundLink(link, category, action) {
  try {
    var pageTracker=_gat._getTracker("UA-18401403-1");
    pageTracker._trackEvent(category, action);
    setTimeout('document.location = "' + link.href + '"', 100)
  }catch(err){}
}
</script>




    </div>
  </body>
</html>
   
